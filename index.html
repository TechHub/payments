<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>test</title>
</head>

<body>
  <button id="customButton">Purchase</button>

  <script src="https://checkout.stripe.com/checkout.js"></script>
  <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script>
    var handler = StripeCheckout.configure({
      key: 'pk_test_9wkm1wXbrApEBDliBmirnkAG',
      image: 'https://s3.amazonaws.com/stripe-uploads/acct_15Vj9dAHdLhZwm0Imerchant-icon-1432491852411-logo_white_square.png',
      locale: 'auto',
      token: function(token) {
        console.log(typeof(token));
        $.ajax({
          method:'POST',
          url: 'http://localhost:3000/charge',
          contentType: "application/json",
          data: JSON.stringify(token)
        }).done(function(data){
          console.log(data);
        });
        // Use the token to create the charge with a server-side script.
        // You can access the token ID with `token.id`
      }
    });

    $('#customButton').on('click', function(e) {
      // Open Checkout with further options
      handler.open({
        name: 'TechHub',
        description: '2 widgets',
        zipCode: true,
        currency: "gbp",
        amount: 2000
      });
      e.preventDefault();
    });

    // Close Checkout on page navigation
    $(window).on('popstate', function() {
      handler.close();
    });
  </script>
</body>

</html>
